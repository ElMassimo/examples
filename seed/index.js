"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var ee=require("fs"),te=require("path"),ne=require("os"),re=require("tty"),oe=require("module");function I(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}function ie(e){if(e&&e.__esModule)return e;var n=Object.create(null);return e&&Object.keys(e).forEach(function(t){if(t!=="default"){var o=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,o.get?o:{enumerable:!0,get:function(){return e[t]}})}}),n.default=e,Object.freeze(n)}var L=I(ee),M=I(te),se=I(ne),D=ie(re),ce=I(oe),A={};const le=L.default,W=M.default,ae=se.default;function P(e){console.log(`[dotenv][DEBUG] ${e}`)}const ue=`
`,fe=/^\s*([\w.-]+)\s*=\s*(.*)?\s*$/,de=/\\n/g,pe=/\r\n|\n|\r/;function k(e,n){const t=Boolean(n&&n.debug),o={};return e.toString().split(pe).forEach(function(s,l){const g=s.match(fe);if(g!=null){const O=g[1];let c=g[2]||"";const v=c.length-1,$=c[0]==='"'&&c[v]==='"';c[0]==="'"&&c[v]==="'"||$?(c=c.substring(1,v),$&&(c=c.replace(de,ue))):c=c.trim(),o[O]=c}else t&&P(`did not match key and value when parsing line ${l+1}: ${s}`)}),o}function he(e){return e[0]==="~"?W.join(ae.homedir(),e.slice(1)):e}function be(e){let n=W.resolve(process.cwd(),".env"),t="utf8",o=!1;e&&(e.path!=null&&(n=he(e.path)),e.encoding!=null&&(t=e.encoding),e.debug!=null&&(o=!0));try{const s=k(le.readFileSync(n,{encoding:t}),{debug:o});return Object.keys(s).forEach(function(l){Object.prototype.hasOwnProperty.call(process.env,l)?o&&P(`"${l}" is already defined in \`process.env\` and will not be overwritten`):process.env[l]=s[l]}),{parsed:s}}catch(s){return{error:s}}}A.config=be,A.parse=k;const N={};process.env.DOTENV_CONFIG_ENCODING!=null&&(N.encoding=process.env.DOTENV_CONFIG_ENCODING),process.env.DOTENV_CONFIG_PATH!=null&&(N.path=process.env.DOTENV_CONFIG_PATH),process.env.DOTENV_CONFIG_DEBUG!=null&&(N.debug=process.env.DOTENV_CONFIG_DEBUG);var ge=N;const ve=/^dotenv_config_(encoding|path|debug)=(.+)$/;var _e=function(n){return n.reduce(function(t,o){const s=o.match(ve);return s&&(t[s[1]]=s[2]),t},{})};(function(){A.config(Object.assign({},ge,_e(process.argv)))})();const y=process.env||{},V=process.argv||[],Ee="NO_COLOR"in y||V.includes("--no-color"),me="FORCE_COLOR"in y||V.includes("--color"),ye=process.platform==="win32",Be=D&&D.isatty&&D.isatty(1)&&y.TERM&&y.TERM!=="dumb",Oe="CI"in y&&("GITHUB_ACTIONS"in y||"GITLAB_CI"in y||"CIRCLECI"in y),we=!Ee&&(me||ye||Be||Oe),j=(e,n,t,o,s=n.substring(0,e)+o,l=n.substring(e+t.length),g=l.indexOf(t))=>s+(g<0?l:j(g,l,t,o)),$e=(e,n,t,o,s)=>e<0?t+n+o:t+j(e,n,o,s)+o,Ce=(e,n,t=e,o=e.length+1)=>s=>s||!(s===""||s===void 0)?$e((""+s).indexOf(n,o),s,e,n,t):"",r=(e,n,t)=>Ce(`[${e}m`,`[${n}m`,t),K={reset:r(0,0),bold:r(1,22,"[22m[1m"),dim:r(2,22,"[22m[2m"),italic:r(3,23),underline:r(4,24),inverse:r(7,27),hidden:r(8,28),strikethrough:r(9,29),black:r(30,39),red:r(31,39),green:r(32,39),yellow:r(33,39),blue:r(34,39),magenta:r(35,39),cyan:r(36,39),white:r(37,39),gray:r(90,39),bgBlack:r(40,49),bgRed:r(41,49),bgGreen:r(42,49),bgYellow:r(43,49),bgBlue:r(44,49),bgMagenta:r(45,49),bgCyan:r(46,49),bgWhite:r(47,49),blackBright:r(90,39),redBright:r(91,39),greenBright:r(92,39),yellowBright:r(93,39),blueBright:r(94,39),magentaBright:r(95,39),cyanBright:r(96,39),whiteBright:r(97,39),bgBlackBright:r(100,49),bgRedBright:r(101,49),bgGreenBright:r(102,49),bgYellowBright:r(103,49),bgBlueBright:r(104,49),bgMagentaBright:r(105,49),bgCyanBright:r(106,49),bgWhiteBright:r(107,49)},Te=e=>e,Ie=({useColor:e=we}={})=>e?K:Object.keys(K).reduce((n,t)=>({...n,[t]:Te}),{}),{reset:Le,bold:F,dim:Me,italic:We,underline:Pe,inverse:ke,hidden:Ve,strikethrough:je,black:Ke,red:Ne,green:Se,yellow:Re,blue:He,magenta:Ye,cyan:ze,white:Qe,gray:Ze,bgBlack:Je,bgRed:Xe,bgGreen:et,bgYellow:tt,bgBlue:nt,bgMagenta:rt,bgCyan:ot,bgWhite:it,blackBright:st,redBright:ct,greenBright:lt,yellowBright:at,blueBright:ut,magentaBright:ft,cyanBright:dt,whiteBright:pt,bgBlackBright:ht,bgRedBright:bt,bgGreenBright:gt,bgYellowBright:vt,bgBlueBright:_t,bgMagentaBright:Et,bgCyanBright:mt,bgWhiteBright:yt}=Ie(),B={info:e=>console.log(`${F(Se("[Info]"))} ${e}`),warn:e=>console.warn(`${F(Re("[Warn]"))} ${e}`),error:e=>console.error(`${F(Ne("[Error]"))} ${e}`)};process.env.DIRECTUS_URL||(B.error("DIRECTUS_URL environment variable is missing."),process.exit(1)),!process.env.DIRECTUS_STATIC_TOKEN&&!process.env.DIRECTUS_EMAIL&&!process.env.DIRECTUS_PASSWORD&&(B.error("DIRECTUS_STATIC_TOKEN or DIRECTUS_EMAIL + DIRECTUS_PASSWORD environment variables are missing."),process.exit(1));const w={url:process.env.DIRECTUS_URL,email:process.env.DIRECTUS_EMAIL,password:process.env.DIRECTUS_PASSWORD,staticToken:process.env.DIRECTUS_STATIC_TOKEN};var x={exports:{}},U={exports:{}},G={exports:{}};const H=M.default,Y=ce.default,De=L.default,z=(e,n,t)=>{if(typeof e!="string")throw new TypeError(`Expected \`fromDir\` to be of type \`string\`, got \`${typeof e}\``);if(typeof n!="string")throw new TypeError(`Expected \`moduleId\` to be of type \`string\`, got \`${typeof n}\``);try{e=De.realpathSync(e)}catch(l){if(l.code==="ENOENT")e=H.resolve(e);else{if(t)return;throw l}}const o=H.join(e,"noop.js"),s=()=>Y._resolveFilename(n,{id:o,filename:o,paths:Y._nodeModulePaths(e)});if(t)try{return s()}catch{return}return s()};G.exports=(e,n)=>z(e,n),G.exports.silent=(e,n)=>z(e,n,!0);const Q=G.exports;U.exports=(e,n)=>require(Q(e,n)),U.exports.silent=(e,n)=>{try{return require(Q(e,n))}catch{}};const Z=U.exports;x.exports=e=>Z(process.cwd(),e),x.exports.silent=e=>Z.silent(process.cwd(),e);var Ae=x.exports;const{Directus:Fe}=Ae("@directus/sdk"),S=new Fe(w.url);var xe=function(e,n){n||(n={});var t={bools:{},strings:{},unknownFn:null};typeof n.unknown=="function"&&(t.unknownFn=n.unknown),typeof n.boolean=="boolean"&&n.boolean?t.allBools=!0:[].concat(n.boolean).filter(Boolean).forEach(function(i){t.bools[i]=!0});var o={};Object.keys(n.alias||{}).forEach(function(i){o[i]=[].concat(n.alias[i]),o[i].forEach(function(p){o[p]=[i].concat(o[i].filter(function(m){return p!==m}))})}),[].concat(n.string).filter(Boolean).forEach(function(i){t.strings[i]=!0,o[i]&&(t.strings[o[i]]=!0)});var s=n.default||{},l={_:[]};Object.keys(t.bools).forEach(function(i){c(i,s[i]===void 0?!1:s[i])});var g=[];e.indexOf("--")!==-1&&(g=e.slice(e.indexOf("--")+1),e=e.slice(0,e.indexOf("--")));function O(i,p){return t.allBools&&/^--[^=]+$/.test(p)||t.strings[i]||t.bools[i]||o[i]}function c(i,p,m){if(!(m&&t.unknownFn&&!O(i,m)&&t.unknownFn(m)===!1)){var u=!t.strings[i]&&J(p)?Number(p):p;v(l,i.split("."),u),(o[i]||[]).forEach(function(C){v(l,C.split("."),u)})}}function v(i,p,m){for(var u=i,C=0;C<p.length-1;C++){var d=p[C];if(d==="__proto__")return;u[d]===void 0&&(u[d]={}),(u[d]===Object.prototype||u[d]===Number.prototype||u[d]===String.prototype)&&(u[d]={}),u[d]===Array.prototype&&(u[d]=[]),u=u[d]}var d=p[p.length-1];d!=="__proto__"&&((u===Object.prototype||u===Number.prototype||u===String.prototype)&&(u={}),u===Array.prototype&&(u=[]),u[d]===void 0||t.bools[d]||typeof u[d]=="boolean"?u[d]=m:Array.isArray(u[d])?u[d].push(m):u[d]=[u[d],m])}function $(i){return o[i].some(function(p){return t.bools[p]})}for(var h=0;h<e.length;h++){var a=e[h];if(/^--.+=/.test(a)){var q=a.match(/^--([^=]+)=([\s\S]*)$/),f=q[1],R=q[2];t.bools[f]&&(R=R!=="false"),c(f,R,a)}else if(/^--no-.+/.test(a)){var f=a.match(/^--no-(.+)/)[1];c(f,!1,a)}else if(/^--.+/.test(a)){var f=a.match(/^--(.+)/)[1],_=e[h+1];_!==void 0&&!/^-/.test(_)&&!t.bools[f]&&!t.allBools&&(o[f]?!$(f):!0)?(c(f,_,a),h++):/^(true|false)$/.test(_)?(c(f,_==="true",a),h++):c(f,t.strings[f]?"":!0,a)}else if(/^-[^-]+/.test(a)){for(var E=a.slice(1,-1).split(""),T=!1,b=0;b<E.length;b++){var _=a.slice(b+2);if(_==="-"){c(E[b],_,a);continue}if(/[A-Za-z]/.test(E[b])&&/=/.test(_)){c(E[b],_.split("=")[1],a),T=!0;break}if(/[A-Za-z]/.test(E[b])&&/-?\d+(\.\d*)?(e-?\d+)?$/.test(_)){c(E[b],_,a),T=!0;break}if(E[b+1]&&E[b+1].match(/\W/)){c(E[b],a.slice(b+2),a),T=!0;break}else c(E[b],t.strings[E[b]]?"":!0,a)}var f=a.slice(-1)[0];!T&&f!=="-"&&(e[h+1]&&!/^(-|--)[^-]/.test(e[h+1])&&!t.bools[f]&&(o[f]?!$(f):!0)?(c(f,e[h+1],a),h++):e[h+1]&&/^(true|false)$/.test(e[h+1])?(c(f,e[h+1]==="true",a),h++):c(f,t.strings[f]?"":!0,a))}else if((!t.unknownFn||t.unknownFn(a)!==!1)&&l._.push(t.strings._||!J(a)?a:Number(a)),n.stopEarly){l._.push.apply(l._,e.slice(h+1));break}}return Object.keys(s).forEach(function(i){Ue(l,i.split("."))||(v(l,i.split("."),s[i]),(o[i]||[]).forEach(function(p){v(l,p.split("."),s[i])}))}),n["--"]?(l["--"]=new Array,g.forEach(function(i){l["--"].push(i)})):g.forEach(function(i){l._.push(i)}),l};function Ue(e,n){var t=e;n.slice(0,-1).forEach(function(s){t=t[s]||{}});var o=n[n.length-1];return o in t}function J(e){return typeof e=="number"||/^0x[0-9a-f]+$/i.test(e)?!0:/^[-+]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(e)}const Ge=()=>xe(process.argv.slice(2));var qe=(e,n,t)=>new Promise((o,s)=>{var l=c=>{try{O(t.next(c))}catch(v){s(v)}},g=c=>{try{O(t.throw(c))}catch(v){s(v)}},O=c=>c.done?o(c.value):Promise.resolve(c.value).then(l,g);O((t=t.apply(e,n)).next())});function X(){return qe(this,null,function*(){B.info("Seeding data for Directus example..."),Ge();try{w.staticToken?(B.info("Using static token for authentication..."),yield S.auth.static(w.staticToken)):w.email&&w.password?(B.info("Using email & password for authentication..."),yield S.auth.login({email:w.email,password:w.password})):(B.error("Unable to login. Please check the credentials & url environment variables."),process.exit(1))}catch(n){B.error(n.message),process.exit(1)}const e=yield S.server.info();console.log(e),yield S.auth.logout(),B.info("Seed completed.")})}X(),exports.start=X;
